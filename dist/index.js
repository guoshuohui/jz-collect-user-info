!function(){var d={},a={0:"未知",1:"简知书院",2:"精英书院",3:"女性传奇",4:"国学书院",5:"简知书院v2",6:"简知平台"},s={dev:"开发",test:"测试",prod:"线上"},w={1:"未知",2:"网络",3:"接口",4:"播放",5:"脚本"},b=navigator.userAgent,h={set:function(t){var e=t||{},i=location.host,o="prod",n=e.type||0;return(-1<i.indexOf(":3000")||-1<i.indexOf(":8080")||-1<i.indexOf("localhost"))&&(o="dev"),-1<i.indexOf("csy-test.")&&(o="test"),d={type:n,typeName:a[n],env:o,envName:s[o],api:"",user:e.user||"",avatar:e.avatar||"",openid:e.openid||"无",storageMax:e.storageMax||20}},get:function(t){return t?d[t]:d}};h.set();var O={system:function(){var t="",e="";if(-1<b.indexOf("like Mac OS X")&&(t="iOS",e=b.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")),(-1<b.indexOf("Android")||-1<b.indexOf("Adr"))&&(t="Android",e=b.replace(/^.*Android ([\d.]+);.*$/,"$1")),-1<b.indexOf("Macintosh")&&(t="Mac OS",e=b.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")),-1<b.indexOf("Windows")){t="Windows";var i=b.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");e={6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP"}[i]||i}return t+" "+e},network:function(){var t="未知类型";return navigator.connection&&navigator.connection.effectiveType&&(t=navigator.connection.effectiveType+" "+navigator.connection.downlink+"M/s"),t}},t={get:function(){var t={info:[]},e=localStorage.getItem("collectUserInfo");return e&&(t=JSON.parse(e)),t},set:function(t){t=t||{};var e=new Date;t.time=e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+" "+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds());var i={type:h.get("type"),env:h.get("env"),openid:h.get("openid"),system:O.system(),ua:b,info:[]},o=localStorage.getItem("collectUserInfo");o&&(i=JSON.parse(o)).info.length>=h.get("storageMax")&&i.info.shift(),i.info.push(t),localStorage.setItem("collectUserInfo",JSON.stringify(i)),i.info=t;var n=h.get("api");n&&function(t){function i(t,e){void 0!==r&&(p=setTimeout(function(){"jsonp"===a?(delete window[t],document.body.removeChild(e)):(v=!0,f&&f.abort())},r))}var o=t.url||"",e=(t.type||"get").toLowerCase(),n=t.data||null,d=t.contentType||"",a=t.dataType||"",s=void 0===t.async||t.async,r=t.timeOut,c=t.before||function(){},m=t.error||function(){},l=t.success||function(){},v=!1,p=null,f=null;void(n&&("string"==typeof n?n=function(t){for(var e=t.split("&"),i=0,o=e.length;i<o;i++)name=encodeURIComponent(e[i].split("=")[0]),value=encodeURIComponent(e[i].split("=")[1]),e[i]=name+"="+value;return e}(n):"object"==typeof n&&(n=function n(t,e){function i(t,e,i){var o=[];return t=void 0===i?t:i+"["+t+"]","object"==typeof e&&null!==e?o=o.concat(n(e,t)):(t=encodeURIComponent(t),e=encodeURIComponent(e),o.push(t+"="+e)),o}var o,d=[];if("[object Array]"==Object.prototype.toString.call(t))for(var a=0,s=t.length;a<s;a++)o=t[a],d=d.concat(i("object"==typeof o?a:"",o,e));else if("[object Object]"==Object.prototype.toString.call(t))for(var r in t)o=t[r],d=d.concat(i(r,o,e));return d}(n)),n=n.join("&").replace("/%20/g","+"),"get"!==e&&"jsonp"!==a||(o+=-1<o.indexOf("?")?-1<o.indexOf("=")?"&"+n:n:"?"+n))),c(),"jsonp"===a?function(){var e=document.createElement("script"),t="JSONP_"+((new Date).getTime()+Math.round(1e3*Math.random()));window[t]=function(t){clearTimeout(p),document.body.removeChild(e),l(t)},e.src=o+(-1<o.indexOf("?")?"&":"?")+"callback="+t,e.type="text/javascript",document.body.appendChild(e),i(t,e)}():((f=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var t=["Microsoft","msxm3","msxml2","msxml1"],e=0;e<t.length;e++)try{return new ActiveXObject(t[e]+".XMLHTTP")}catch(t){}}()).open(e,o,s),"post"!==e||d?d&&f.setRequestHeader("Content-Type",d):f.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),f.onreadystatechange=function(){if(4===f.readyState){if(void 0!==r){if(v)return;clearTimeout(p)}if(200<=f.status&&f.status<300||304==f.status)try{var t="string"==typeof f.responseText?JSON.parse(f.responseText):f.responseText;l(t)}catch(t){l(t)}else m(f.status,f.statusText)}},f.send("get"===e?null:n),i())}({url:n,data:i,type:"get",success:function(t){console.log(t)}})},print:function(t){var e=h.get("user"),i=h.get("avatar"),o=h.get("openid"),n=h.get("typeName"),d=h.get("envName"),a=O.network(),s=O.system(),r=this.get();if(r.info.reverse(),!t){var c=r.info;for(var m in c)c[m].typeText=w[c[m].type];return o+" ， 用户名："+e+" ， 类型："+n+" ， 环境："+d+" ， 网络："+a+" ， 终端："+b+" ， 头像："+i+" ， 警告："+JSON.stringify(c)}var l,v,p,f="";for(var u in r.info)l=u,p=void 0,v=r.info[l],p="",v.failed&&(p='\t<div class="mod-item error">\t\t<div class="mod-item-title">警告：</div>\t\t<div class="mod-item-main">此条信息因网络问题未成功发送到后台，点击重新发送</div>\t</div>'),f+='<div class="mod">\t<div class="mod-item">\t\t<div class="mod-item-title">类型：</div>\t\t<div class="mod-item-main">'+v.type+"（"+w[v.type]+'）</div>\t</div>\t<div class="mod-item">\t\t<div class="mod-item-title">时间：</div>\t\t<div class="mod-item-main">'+v.time+'</div>\t</div>\t<div class="mod-item">\t\t<div class="mod-item-title">详情：</div>\t\t<div class="mod-item-main">'+v.detail+"</div>\t</div>"+p+"</div>";var g="";e&&(g='\t<div class="mod-item">\t\t<div class="mod-item-title">用户：</div>\t\t<div class="mod-item-main">'+e+"</div>\t</div>");var y="";i&&(y='\t<div class="mod-item">\t\t<div class="mod-item-title">头像：</div>\t\t<div class="mod-item-main"><img src="'+i+'"></div>\t</div>');var x='<div class="res-content"><div class="mod">\t<div class="mod-item">\t\t<div class="mod-item-title">ID：</div>\t\t<div class="mod-item-main">'+o+"</div>\t</div>"+g+y+'\t<div class="mod-item">\t\t<div class="mod-item-title">类型：</div>\t\t<div class="mod-item-main">'+n+'</div>\t</div>\t<div class="mod-item">\t\t<div class="mod-item-title">环境：</div>\t\t<div class="mod-item-main">'+d+'</div>\t</div>\t<div class="mod-item">\t\t<div class="mod-item-title">网络：</div>\t\t<div class="mod-item-main">'+a+'</div>\t</div>\t<div class="mod-item">\t\t<div class="mod-item-title">系统：</div>\t\t<div class="mod-item-main">'+s+'</div>\t</div>\t<div class="mod-item">\t\t<div class="mod-item-title">UA：</div>\t\t<div class="mod-item-main">'+b+"</div>\t</div></div>"+f+"</div>";t?document.getElementById(t).innerHTML=x:document.body.innerHTML=x,function(){var t=document.createElement("style");t.type="text/css",t.rel="stylesheet",t.appendChild(document.createTextNode(".res-content{padding:0 10px 30px;font-size:14px;}.mod{margin:10px 0;padding:10px 0;border-bottom:1px solid #dedede;}.mod:last-child{border-bottom:none;}.mod-item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:5px 0;}.mod-item-title{font-weight:bold;width:60px;}.mod-item-main{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;word-wrap:break-word;word-break:break-all;color:#666;}.mod-item-main img{display:block;height:50px;width:50px;margin:10px 0;}.mod-item.error,.mod-item.error .mod-item-main{color:red;}.mod-item.error:active{opacity:0.7;}")),document.getElementsByTagName("head")[0].appendChild(t)}()}};function r(t){var e=parseInt(t);return e<10?"0"+e:e}window.$collectUserInfo={config:h,device:O,collect:t}}();